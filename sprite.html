<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <link rel="stylesheet" href="../canvas/main.css">
</head>

<body>

    <canvas width=700 height=500></canvas>
    <script>
        canvas = document.querySelector('canvas');
        ctx = canvas.getContext('2d');

        // extract and save spritesheet information
        sheetWidth = 320;
        sheetHeight = 64;
        cols = 5;
        rows = 1;
        spriteWidth = sheetWidth / cols;
        spriteHeight = sheetHeight / rows;

        // load sheet
        sheet = new Image();
        sheet.src = 'Fire.png';

        function getNextSprite() {
            var nextSpriteIndex = -1;
            return {
                getNextSpriteIndex: function() {
                    nextSpriteIndex++;
                    return nextSpriteIndex % cols;
                },
                getNextSpriteX: function() {
                    var x = this.getNextSpriteIndex() * spriteWidth;
                    return x;
                }
            }

        }
        // 
        sprite = getNextSprite();

        function loop() {
            setTimeout(function() {
                requestAnimationFrame(loop);

                ctx.clearRect(0, 0, 700, 500);

                var spriteX = sprite.getNextSpriteX();

                ctx.drawImage(sheet, spriteX, 0, spriteWidth, spriteHeight, 0, 0, spriteWidth * 5, spriteHeight * 5);
            }, 100);
        }
        loop();

    </script>
</body>

</html>
