<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <link rel="stylesheet" href="../main.css">
</head>

<body>

    <canvas width=700 height=500></canvas>
    <script>
        canvas = document.querySelector('canvas');
        ctx = canvas.getContext('2d');

        // extract and save spritesheet information
        function Sheet(sheetPath, width, height, cols, rows) {
            this.spriteWidth = width / cols;
            this.spriteHeight = height / rows;

            // load sheet
            this.sheet = new Image();
            this.sheet.src = sheetPath;
            var nextSpriteIndex = -1;
            this.getNextSpriteIndex = function() {
                nextSpriteIndex++;
                return nextSpriteIndex % 70;
            };
            this.getNextSpritePos = function() {
                var ind = this.getNextSpriteIndex();

                var c = ind % cols;
                var r = Math.floor(ind / cols);
                return {
                    x: c * this.spriteWidth,
                    y: r * this.spriteHeight
                };
            }
        }
        // 
        sheet = new Sheet("player-running9x81.png", 1620, 2720, 9, 8);

        function loop() {
            setTimeout(function() {
                requestAnimationFrame(loop);

                ctx.clearRect(0, 0, 700, 500);

                var pos = sheet.getNextSpritePos();
                console.log('ps.x,pos.y:', pos.x, pos.y);

                ctx.drawImage(sheet.sheet, pos.x, pos.y, sheet.spriteWidth, sheet.spriteHeight, 0, 0, sheet.spriteWidth, sheet.spriteHeight);
            }, 1);
        }
        loop();
    </script>
</body>
</html>




